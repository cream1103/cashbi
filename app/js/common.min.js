function submitFormCheck(e){e.preventDefault();var t=e.target||e.srcElement,s=t.querySelectorAll(".input_red");if(0==s.length){void 0===this.rnd&&"success"==this.rnd,this.rnd="success"===this.rnd?"error":"success";var i=document.createElement("div");i.classList.add("form-popup-processing"),t.appendChild(i),setTimeout(function(){i.classList.add("show")},100),setTimeout(function(){i.classList.remove("show");var e={success:"Форма отправлена",error:"Сообщение об ошибке"},s=document.createElement("div");s.classList.add("form-popup-msg"),s.innerHTML=e[this.rnd],t.appendChild(s),setTimeout(function(){s.classList.add("show"),s.classList.add(this.rnd)},100),setTimeout(function(){s.classList.remove("show"),setTimeout(function(){t.removeChild(s)},1e3)},3e3),setTimeout(function(){t.removeChild(i)},1e3)},3e3)}}function comparePassword(e){e=e||event;var t=e.target||e.srcElement,s=t.form.querySelector("input[type=password]"),i=s.value===t.value;return i?t.classList.remove("input_red"):t.classList.add("input_red"),i}function validMail(e){e=e||event;var t=e.target||e.srcElement,s=/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/;""==t.value?t.classList.remove("input_red"):s.test(t.value)?(t.classList.remove("input_red"),t.parentNode.classList.remove("mail_icon"),t.parentNode.classList.add("mail_icon_activ"),t.nextElementSibling.classList.contains("block_input_pass")&&(t.nextElementSibling.style.height="84px"),t.nextElementSibling.classList.contains("block_reg_pass")&&(t.nextElementSibling.style.height="114px")):(t.classList.add("input_red"),t.parentNode.classList.add("mail_icon"),t.parentNode.classList.remove("mail_icon_activ"),t.nextElementSibling.style.height="0px",$("input[type=password]").val(""))}$(document).ready(function(){function e(e){return setTimeout(function(){$(".animate_text").addClass("start-once"),setTimeout(function(){$(".animate_text").removeClass("start-once")},1200)},e),!1}function t(){var e,t=0,s=$(".present.blue span"),i=$(".present.sky span"),n=$(".present.red span"),a=$("#_left-col p"),o=$("#_right-col p"),l=$("#a-slider"),r=$("#progress-bar");e=setInterval(function(){l.val(t),r.css("width",100-t/3+"%"),a.text((1e4*t/300).toFixed(0)+" руб."),0==t?s.parent().addClass("fill"):100==t?(i.parent().addClass("fill"),s.text("+"+(t/10).toFixed(0)+"%"),o.text("+"+(t/10).toFixed(0)+"%")):200==t?(n.parent().addClass("fill"),i.text("+"+(t/10).toFixed(0)+"%"),o.text("+"+(t/10).toFixed(0)+"%")):300==t&&(n.text("+"+(t/10).toFixed(0)+"%"),o.text("+"+(t/10).toFixed(0)+"%")),t++,t>300&&(clearInterval(e),$(".present").removeClass("animate_on"))},3)}function s(e){if(void 0===this.cvar&&(this.cvar="0"),e!==this.cvar){{var t=$(".present.blue"),s=$(".present.sky"),i=$(".present.red");$("#progress-bar"),$("#a-slider")}switch(t.removeClass("fill").children("span").text("+0%"),s.removeClass("fill").children("span").text("+0%"),i.removeClass("fill").children("span").text("+0%"),e){case"3":i.addClass("fill").children("span").text("+30%");case"2":s.addClass("fill").children("span").text("+20%");case"1":t.addClass("fill").children("span").text("+10%")}this.cvar=e}}function i(){$(window).width()<600?$("#search_shop_id").attr("placeholder","Найти свой магазин"):$("#search_shop_id").attr("placeholder","Найти свой магазин, например SAPATO")}function n(){$(window).width()<600?l?l.redrawSlider():(l=$(".bxslider_shops"),l.bxSlider({slideWidth:250,minSlides:2,maxSlides:3,moveSlides:2,slideMargin:20})):$(window).width()>616&&l&&(l.destroySlider(),l=null)}var a=!0,o=!0;$(window).scroll(function(){var s=$(window).height(),i=$(window).scrollTop(),n=$(".animate_text").offset().top,l=$(".animate_text").height();n>i&&i+s>n+l?(a&&e(1e3),a=!1):a=!0;var r=$("#animated_slider").offset().top,d=$("#animated_slider").height()/3;r>i&&i+s>r+d&&(o&&setTimeout(function(){t()},500),o=!1)}),a=e(2e3),$("#a-slider").on("mousemove change",function(){var e,t,i=$("#progress-bar");this.value>=0&&this.value<=100?(e=4*this.value,t="+0%",s("0")):this.value>100&&this.value<=200?(e=26*(this.value-100)+400,t="+10%",s("1")):this.value>200&&this.value<300?(e=70*(this.value-200)+3e3,t="+20%",s("2")):(e=1e4,t="+30%",s("3")),$("#_left-col p").text(parseInt(e)+" руб."),$("#_right-col p").text(t),i.css("width",100-this.value/3+"%")}),$("#progress-bar").on("click",function(e){var t=e.offsetX,s=e.currentTarget.clientWidth,i=e.currentTarget.parentElement.clientWidth,n=parseInt(100*(i-s+t)/i*3);$("#a-slider").val(n).change()}),$("#slide-menu-container").on("click",function(e){var t=e.target||e.srcElement;t.id===this.id&&($("body").css("overflow","auto"),$("#slide-menu-container").removeClass("show"))}),$(".navbar-toggle.collapsed").on("click",function(){var e=$(window).width()<981;return e&&(setTimeout(function(){$("body").css("overflow","hidden")},200),$("#slide-menu-container").addClass("show").find("input[type=search]").focus()),!e}),$("input[list]").on("onkeypress",function(e){13==e.keyCode&&$(this).closest("form").find("[type=submit]").click()}),$(".bxslider").bxSlider({auto:!0,pause:4e3,autoHover:!0,speed:1e3}),$("#back-top").hide(),$(function(){$(window).scroll(function(){$(this).scrollTop()>100?$("#back-top").fadeIn():$("#back-top").fadeOut()}),$("#back-top a").click(function(){return $("body,html").animate({scrollTop:0},800),!1})});var l=null;$(window).on("load",function(){i(),n()});var r=null;$(window).on("resize",function(){r||(r=setTimeout(function(){r=null,i(),n()},500))}),$("input[type=email]").on("keyup blur",function(){validMail(event)}),$("input[type=password].retry").on("keyup blur",function(){comparePassword(event)}),$("form").on("submit",function(){submitFormCheck(event)})});